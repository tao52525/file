#### èœ‚é¸Ÿç§»åŠ¨ç«¯æ”¹ç‰ˆå…¼å®¹æ€§é—®é¢˜æ€»ç»“

å…¼å®¹æ€§é—®é¢˜ä¸»è¦æ˜¯é’‰é’‰ã€å›¢é˜Ÿappã€ä¼—åŒ…appä¸‰ä¸ªå¹³å°ï¼Œioså’Œå®‰å“2ä¸ªæ“ä½œç³»ç»Ÿ

1. css ä¼ªç±»å…ƒç´ è®¾ç½® filter blurï¼Œiosä¸Šä¼šå¶çŽ°æ¸²æŸ“é—®é¢˜

   è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨filteråªæ˜¯ä¸€ä¸ªå°ä¼˜åŒ–ï¼Œä½œç”¨å¾ˆå°ï¼Œæ‰€ä»¥åˆ æŽ‰

2. è§†é¢‘æ–¹é¢

   1ï¼‰

   é—®é¢˜ï¼šå›¢é˜Ÿappã€ä¼—åŒ…appå®‰å“å…¨å±æ’­æ”¾é—®é¢˜ã€‚

   è§£å†³æ–¹æ¡ˆï¼šå·²é’ˆå¯¹æ€§ç¦ç”¨ã€å›¢é˜Ÿappæ²Ÿé€šä¸‹æœŸæ”¹å¥½ï¼Œä¸‹æœŸå¯ä»¥ä¿®å¤ï¼Œä¼—åŒ…appè¿˜åœ¨æ²Ÿé€šä¸­

   2ï¼‰

   é—®é¢˜ï¼šå›¢é˜Ÿappè®¾ç½®è§†é¢‘è·³è½¬é—®é¢˜ï¼Œç”¨html5çš„video apiï¼Œè®¾ç½®videoçš„currentTimeï¼Œè·³è½¬æ’­æ”¾æ—¶é—´ï¼Œåœ¨appé‡Œå¤±æ•ˆ

   è§£å†³æ–¹æ¡ˆï¼šå›¢é˜Ÿappæ²Ÿé€šä¸­

   3ï¼‰

   é—®é¢˜ï¼šå›¢é˜ŸappèŽ·å–ä¸åˆ°è§†é¢‘æ—¶é•¿ï¼ˆvideo.durationï¼‰

   è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨åŽç«¯è¿”å›žçš„è§†é¢‘æ—¶é•¿ï¼Œå¾…æ²Ÿé€š

   4ï¼‰

   é—®é¢˜ï¼šï¼ˆiosï¼‰è¯¾ç¨‹ä¸­çš„è§†é¢‘ç« èŠ‚å¼€å§‹æ’­æ”¾5såŽï¼Œè§†é¢‘çš„æ“ä½œé¡¹ä¸ä¼šè‡ªåŠ¨æ¶ˆå¤±ï¼Œéœ€ç‚¹å‡»ç”»é¢åŽæ‰ä¼šéšè— ï¼ˆä½¿ç”¨çš„æ˜¯dplayeræ’­æ”¾å™¨å­˜åœ¨çš„bugï¼‰

   è§£å†³æ–¹æ¡ˆï¼šæ‰‹åŠ¨ä½¿ç”¨dPlayeræºç ä¸­éšè—æ“ä½œé¡¹çš„æ–¹æ³•ï¼ŒdPlayer.controller.setAutoHide()

3. iosä¸Šæ— æ³•è®¾ç½®input focus

   è®¾ç½®autofocusæ— æ•ˆï¼Œé¡µé¢åŠ è½½å®Œè®¾ç½®input.foucs()ä¹Ÿå¤±æ•ˆ

   æŒ‰ç…§ç½‘ä¸Šçš„è¯´æ³•ï¼š ```iosä¸Šåªæœ‰ç”¨æˆ·äº¤äº’è§¦å‘çš„focusäº‹ä»¶æ‰ä¼šèµ·æ•ˆ```ï¼Œæ¯”å¦‚è®¾ç½®æŸä¸ªclickäº‹ä»¶çš„å›žè°ƒå‡½æ•°ä¸­è®¾ç½®input.foucs()ï¼Œä½†æ˜¯jsæ‰‹åŠ¨è§¦å‘è¯¥äº‹ä»¶focusä¸ç”Ÿæ•ˆï¼Œç”¨æˆ·è§¦å‘æ‰ç”Ÿæ•ˆ

   

   æ›´æ”¹webviewè®¾ç½®ï¼Œä½†æ˜¯æ²¡åŠžæ³•åŽ»éªŒè¯ä¹Ÿæ²¡åŠžæ³•åŽ»åš

   > On your `UIWebView`, set `keyboardDisplayRequiresUserAction` to `NO`.

   

   è§£å†³æ–¹æ³•ï¼š

   ä½¿ç”¨è‡ªå®šä¹‰çš„vueæŒ‡ä»¤ï¼Œè®©domåœ¨æ³¨å†Œæ—¶foucsï¼Œä¸ºäº†å…¼å®¹keep-aliveï¼Œç»„ä»¶æ¿€æ´»å’Œé€€å‡ºæ—¶åšä¸ªdomåˆ é™¤æ·»åŠ å¤„ç†

   insertedï¼šå½“è¢«ç»‘å®šçš„å…ƒç´ æ’å…¥åˆ° DOM ä¸­æ—¶

   ```js
   // æ³¨å†Œv-focusæŒ‡ä»¤
   Vue.directive('focus', {
     inserted: el => {
       if (el.nodeName.toUpperCase() === 'INPUT') {
         el.focus()
       } else {
         const node = el.querySelector('input')
         node.focus()
       }
     }
   })
   
   // å…¼å®¹keep-alive
   activated () {
     this.searchInputShow = true
   },
   deactivated () {
     this.searchInputShow = false
   }
   ```

   v-focusçš„å®žçŽ°åŽŸç†æ˜¯ç›®æ ‡å…ƒç´ æ’å…¥åˆ°domä¸­äº‹ä»¶çš„æ—¶å€™è§¦å‘input.foucsï¼Œæ‰‹åŠ¨å®žçŽ°å¦‚ä¸‹

   ```js
   var targetNode = document.querySelector('form.search')
   var config = { attributes: true, childList: true, subtree: true }
   var callback = function (mutationsList) {
     for (var mutation of mutationsList) {
       if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
         const input = document.querySelector('form.search .van-field')
         if (mutation.addedNodes[0] === input) {
           console.log('focus')
           document.querySelector('form.search input').focus()
         }
       }
     }
   }
   var observer = new MutationObserver(callback)
   observer.observe(targetNode, config)
   this.searchInputShow = true
   ```

   ä»»ç„¶å­˜åœ¨çš„é—®é¢˜ï¼šé¡µé¢è¿”å›žæ—¶ï¼Œè®¾ç½®focusä¸ç”Ÿæ•ˆï¼Œå“ŽðŸ˜”

   

4. iOSèœ‚é¸Ÿå›¢é˜ŸAppå†…ï¼Œå­¦ä¹ è®°å½•é¡µé¢ä½¿ç”¨vant-tabs ç²˜æ€§å¸ƒå±€stickyï¼Œè¿”å›žè¯¥é¡µé¢ä¼šå‡ºçŽ°æ¸²æŸ“é—®é¢˜
   ![img](/Users/jt/Desktop/ba23858b826cf0c2f1932539b981e2da.png)

   è§£å†³æ–¹æ³•ï¼šä¸ä½¿ç”¨stickyï¼Œæ‰‹åŠ¨ä½¿ç”¨fixedå¸ƒå±€

5. iOSèœ‚é¸Ÿé’‰é’‰å’Œå›¢é˜ŸAppé¡µé¢çš„æ ‡é¢˜éƒ½æ˜¾ç¤ºä¸ºé¦–é¡µ  
   ioså’Œå›¢é˜Ÿappç›´æŽ¥è®¾ç½®document.titleä¸èµ·æ•ˆï¼Œåˆ†åˆ«è°ƒç”¨å…¶apiè®¾ç½®title

   ```js
   VueRouter.beforeEach((to, from, next) => {
     NProgress.start()
     document.title = to.meta.title
     if (dd.version) {
       dd.biz.navigation.setRight({
         show: false
       })
       dd.biz.navigation.setTitle({
         title: to.meta.title
       })
     }
     if (window.LPDWebViewInterface) {
       window.LPDWebViewInterface.setNavTitle({
         'titleName': document.title,
         'titleColor': '#ffffff'
       })
     } else {
       document.addEventListener('WebViewJavascriptBridgeInjectFinishedReady', () => {
         if (window.LPDWebViewInterface) {
           window.LPDWebViewInterface.setNavTitle({
             'titleName': document.title,
             'titleColor': '#ffffff'
           })
         }
       })
     }
     next()
   })
   ```